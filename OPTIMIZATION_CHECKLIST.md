# å°ˆæ¡ˆå„ªåŒ–æª¢æŸ¥æ¸…å–®

## 1. å°ˆæ¡ˆè¨­å®šèˆ‡åŠŸèƒ½åˆ†é¡

### âœ… å·²å®Œæˆçš„å„ªé»
- æ­¥é©Ÿ ID é€£çºŒä¸”æœ‰åºï¼ˆ1-18ï¼‰
- åˆ†é¡ç³»çµ±å®Œæ•´ï¼ˆ10 å€‹åˆ†é¡ï¼‰
- è®Šæ•¸ç³»çµ±çµæ§‹è‰¯å¥½

### âš ï¸ éœ€è¦èª¿æ•´çš„å•é¡Œ

#### 1.1 Helper Functions æœªè¢«ä½¿ç”¨
**å•é¡Œ**ï¼š`getStepsByCategory` å’Œ `getCategoryCounts` å·²å®šç¾©ä½†æœªåœ¨å°ˆæ¡ˆä¸­ä½¿ç”¨
**ä½ç½®**ï¼š`src/data/stepsData.ts:4132-4142`
**å»ºè­°**ï¼š
- åœ¨ `StepSidebar` ä¸­ä½¿ç”¨ `getStepsByCategory` ä¾†åˆ†çµ„æ­¥é©Ÿ
- åœ¨çµ±è¨ˆæˆ–å„€è¡¨æ¿åŠŸèƒ½ä¸­ä½¿ç”¨ `getCategoryCounts`
- æˆ–ç§»é™¤æœªä½¿ç”¨çš„å‡½æ•¸

#### 1.2 åˆ†é¡å‘½åä¸ä¸€è‡´
**å•é¡Œ**ï¼šéƒ¨åˆ†åˆ†é¡ä½¿ç”¨è‹±æ–‡ï¼Œéƒ¨åˆ†ä½¿ç”¨ä¸­æ–‡æ¦‚å¿µ
**ä½ç½®**ï¼š`src/data/stepsData.ts:31`
**å»ºè­°**ï¼š
- çµ±ä¸€ä½¿ç”¨è‹±æ–‡å‘½åï¼ˆå·²å¯¦ä½œï¼‰
- ä½†åœ¨ UI é¡¯ç¤ºæ™‚ä½¿ç”¨ä¸­æ–‡æ¨™ç±¤ï¼ˆå·²å¯¦ä½œï¼‰
- ç¢ºèªæ‰€æœ‰åˆ†é¡éƒ½æœ‰å°æ‡‰çš„åœ–æ¨™å’Œé¡è‰²é…ç½®

#### 1.3 æ­¥é©Ÿé †åºèˆ‡åˆ†é¡é‚è¼¯
**å•é¡Œ**ï¼šæ­¥é©Ÿ ID é †åºèˆ‡åˆ†é¡é †åºä¸ä¸€è‡´
**ç¾æ³**ï¼š
- ID 1-4, 7-9: Supabase
- ID 5: n8n
- ID 6: general
- ID 10: backend
- ID 11: crm
- ID 12: email
- ID 13-14: line
- ID 15: frontend
- ID 16-18: templates

**å»ºè­°**ï¼š
- è€ƒæ…®é‡æ–°æ’åºæˆ–æ·»åŠ èªªæ˜æ–‡ä»¶
- æˆ–åœ¨ UI ä¸­æŒ‰åˆ†é¡æ’åºé¡¯ç¤ºï¼ˆå·²å¯¦ä½œï¼‰

#### 1.4 ç¼ºå°‘ README æˆ–æ–‡ä»¶
**å•é¡Œ**ï¼šå°ˆæ¡ˆç¼ºå°‘ä½¿ç”¨èªªæ˜å’Œæ¶æ§‹æ–‡ä»¶
**å»ºè­°**ï¼š
- æ–°å¢ README.md èªªæ˜å°ˆæ¡ˆç”¨é€”
- æ–°å¢è®Šæ•¸ä½¿ç”¨èªªæ˜æ–‡ä»¶
- æ–°å¢åˆ†é¡ç³»çµ±èªªæ˜

---

## 2. æ•ˆèƒ½å„ªåŒ–å»ºè­°

### âš ï¸ éœ€è¦å„ªåŒ–çš„å•é¡Œ

#### 2.1 PromptCard è®Šæ•¸æ›¿æ›æ•ˆèƒ½
**å•é¡Œ**ï¼š`replaceVariables` å‡½æ•¸åœ¨æ¯æ¬¡æ¸²æŸ“æ™‚éƒ½æœƒåŸ·è¡Œï¼Œå³ä½¿è®Šæ•¸æœªæ”¹è®Š
**ä½ç½®**ï¼š`src/components/PromptCard.tsx:37-63`
**å½±éŸ¿**ï¼šç•¶æœ‰å¤šå€‹ PromptCard æ™‚ï¼Œæœƒé€ æˆä¸å¿…è¦çš„è¨ˆç®—
**å»ºè­°**ï¼š
```typescript
const processedPrompt = useMemo(() => {
  return replaceVariables(prompt.prompts[tone]);
}, [prompt.prompts, tone, moduleVariables, variables]);
```

#### 2.2 æ¨¡çµ„è®Šæ•¸åˆå§‹åŒ–å•é¡Œ
**å•é¡Œ**ï¼š`moduleVariables` åªåœ¨çµ„ä»¶é¦–æ¬¡æ¸²æŸ“æ™‚åˆå§‹åŒ–ï¼Œç•¶ prompt æ”¹è®Šæ™‚ä¸æœƒæ›´æ–°
**ä½ç½®**ï¼š`src/components/PromptCard.tsx:31`
**å½±éŸ¿**ï¼šåˆ‡æ›ä¸åŒ prompt æ™‚ï¼Œæ¨¡çµ„è®Šæ•¸ä¸æœƒé‡ç½®
**å»ºè­°**ï¼š
```typescript
useEffect(() => {
  if (prompt.variables) {
    const initial: Record<string, string> = {};
    prompt.variables.forEach(v => {
      initial[v.key] = variables[v.key] || "";
    });
    setModuleVariables(initial);
  } else {
    setModuleVariables({});
  }
}, [prompt.id, prompt.variables, variables]);
```

#### 2.3 ç¼ºå°‘ React.memo å„ªåŒ–
**å•é¡Œ**ï¼šå­çµ„ä»¶åœ¨çˆ¶çµ„ä»¶é‡æ–°æ¸²æŸ“æ™‚ä¹Ÿæœƒé‡æ–°æ¸²æŸ“
**ä½ç½®**ï¼šæ‰€æœ‰çµ„ä»¶
**å»ºè­°**ï¼š
- å° `PromptCard` ä½¿ç”¨ `React.memo`
- å° `Checklist` ä½¿ç”¨ `React.memo`
- å° `StepSidebar` ä½¿ç”¨ `React.memo`ï¼ˆå¦‚æœ props ç©©å®šï¼‰

#### 2.4 stepsData æª”æ¡ˆéå¤§
**å•é¡Œ**ï¼š`stepsData.ts` æª”æ¡ˆè¶…é 4000 è¡Œï¼Œå¯èƒ½å½±éŸ¿è¼‰å…¥æ•ˆèƒ½
**ä½ç½®**ï¼š`src/data/stepsData.ts`
**å»ºè­°**ï¼š
- è€ƒæ…®å°‡ä¸åŒåˆ†é¡çš„æ­¥é©Ÿæ‹†åˆ†åˆ°ä¸åŒæª”æ¡ˆ
- ä½¿ç”¨å‹•æ…‹ import æŒ‰éœ€è¼‰å…¥
- æˆ–ä½¿ç”¨ code splitting

#### 2.5 æœå°‹åŠŸèƒ½æ•ˆèƒ½
**å•é¡Œ**ï¼š`SearchBar` ä¸­çš„æœå°‹é‚è¼¯åœ¨æ¯æ¬¡è¼¸å…¥æ™‚éƒ½æœƒåŸ·è¡Œ
**ä½ç½®**ï¼š`src/components/SearchBar.tsx:25-72`
**å»ºè­°**ï¼š
- å·²ä½¿ç”¨ `useMemo`ï¼Œä½†å¯ä»¥åŠ å…¥é˜²æŠ–ï¼ˆdebounceï¼‰
- è€ƒæ…®ä½¿ç”¨ Web Worker è™•ç†å¤§é‡è³‡æ–™æœå°‹

#### 2.6 è®Šæ•¸æ›¿æ›æ­£å‰‡è¡¨é”å¼å„ªåŒ–
**å•é¡Œ**ï¼šæ¯æ¬¡æ›¿æ›éƒ½å»ºç«‹æ–°çš„ RegExpï¼Œå¯ä»¥å¿«å–
**ä½ç½®**ï¼š`src/components/PromptCard.tsx:43,55`
**å»ºè­°**ï¼š
```typescript
// å»ºç«‹å¿«å–
const regexCache = new Map<string, RegExp>();

const getRegex = (key: string) => {
  if (!regexCache.has(key)) {
    regexCache.set(key, new RegExp(`\\{\\{${key}\\}\\}`, "g"));
  }
  return regexCache.get(key)!;
};
```

---

## 3. è®Šæ•¸èˆ‡ Prompts çš„çµæ§‹

### âš ï¸ éœ€è¦èª¿æ•´çš„å•é¡Œ

#### 3.1 è®Šæ•¸å‘½åä¸€è‡´æ€§æª¢æŸ¥
**å•é¡Œ**ï¼šéœ€è¦ç¢ºèªæ‰€æœ‰è®Šæ•¸éƒ½éµå¾ªä¸€è‡´çš„å‘½åè¦ç¯„
**ç¾æ³**ï¼š
- å…¨åŸŸè®Šæ•¸ï¼šä½¿ç”¨ `snake_case`ï¼ˆâœ… æ­£ç¢ºï¼‰
- æ¨¡çµ„è®Šæ•¸ï¼šä½¿ç”¨ `snake_case`ï¼ˆâœ… æ­£ç¢ºï¼‰

**å»ºè­°**ï¼š
- å»ºç«‹è®Šæ•¸å‘½åè¦ç¯„æ–‡ä»¶
- æª¢æŸ¥æ˜¯å¦æœ‰éºæ¼çš„è®Šæ•¸

#### 3.2 è®Šæ•¸ä½¿ç”¨è¿½è¹¤
**å•é¡Œ**ï¼šç„¡æ³•è¿½è¹¤å“ªäº›è®Šæ•¸åœ¨å“ªäº› prompts ä¸­è¢«ä½¿ç”¨
**å»ºè­°**ï¼š
- å»ºç«‹è®Šæ•¸ä½¿ç”¨ç´¢å¼•
- æˆ–åœ¨ UI ä¸­é¡¯ç¤ºè®Šæ•¸ä½¿ç”¨æƒ…æ³
- æ¨™è¨˜æœªä½¿ç”¨çš„è®Šæ•¸

#### 3.3 æ¨¡çµ„è®Šæ•¸èˆ‡å…¨åŸŸè®Šæ•¸çš„è¡çªè™•ç†
**å•é¡Œ**ï¼šæ¨¡çµ„è®Šæ•¸å’Œå…¨åŸŸè®Šæ•¸å¯èƒ½ä½¿ç”¨ç›¸åŒçš„ key
**ä½ç½®**ï¼š`src/components/PromptCard.tsx:42`
**ç¾æ³**ï¼šå·²å¯¦ä½œå„ªå…ˆé †åºï¼ˆæ¨¡çµ„è®Šæ•¸å„ªå…ˆï¼‰
**å»ºè­°**ï¼š
- åœ¨æ–‡ä»¶æˆ–è¨»è§£ä¸­èªªæ˜å„ªå…ˆé †åº
- è€ƒæ…®åœ¨ UI ä¸­æ¨™ç¤ºè®Šæ•¸ä¾†æº

#### 3.4 è®Šæ•¸é©—è­‰æ©Ÿåˆ¶
**å•é¡Œ**ï¼šæ²’æœ‰é©—è­‰è®Šæ•¸æ ¼å¼ï¼ˆå¦‚ emailã€URLã€API key æ ¼å¼ï¼‰
**å»ºè­°**ï¼š
- åœ¨ `ProjectSettingsDrawer` ä¸­åŠ å…¥è®Šæ•¸é©—è­‰
- ä½¿ç”¨ Zod schema é©—è­‰
- é¡¯ç¤ºé©—è­‰éŒ¯èª¤è¨Šæ¯

#### 3.5 è®Šæ•¸é è¨­å€¼ç®¡ç†
**å•é¡Œ**ï¼šè®Šæ•¸é è¨­å€¼åˆ†æ•£åœ¨å¤šè™•ï¼ˆvariableConfigã€Index.tsxï¼‰
**å»ºè­°**ï¼š
- é›†ä¸­ç®¡ç†è®Šæ•¸é è¨­å€¼
- å»ºç«‹è®Šæ•¸é…ç½®æª”æ¡ˆ
- æ”¯æ´å¾ localStorage è¼‰å…¥å·²å„²å­˜çš„è®Šæ•¸

#### 3.6 Prompt çµæ§‹ä¸€è‡´æ€§
**å•é¡Œ**ï¼šéƒ¨åˆ† prompts ç¼ºå°‘æŸäº› toneï¼ˆdiagnostic/fix/verifyï¼‰
**å»ºè­°**ï¼š
- ç¢ºä¿æ‰€æœ‰ prompts éƒ½æœ‰ä¸‰å€‹ tone
- æˆ–å°‡ tone æ”¹ç‚ºå¯é¸
- åœ¨ TypeScript é¡å‹ä¸­åæ˜ é€™ä¸€é»

#### 3.7 è®Šæ•¸æ›¿æ›éŒ¯èª¤è™•ç†
**å•é¡Œ**ï¼šç•¶è®Šæ•¸æ›¿æ›å¤±æ•—æ™‚æ²’æœ‰éŒ¯èª¤æç¤º
**å»ºè­°**ï¼š
- åŠ å…¥è®Šæ•¸æ›¿æ›é©—è­‰
- é¡¯ç¤ºç¼ºå°‘çš„è®Šæ•¸è­¦å‘Š
- æä¾›è®Šæ•¸å»ºè­°ï¼ˆè‡ªå‹•å®Œæˆï¼‰

---

## 4. å…¶ä»–å»ºè­°

### 4.1 æœ¬åœ°å„²å­˜
**å»ºè­°**ï¼šå°‡ç”¨æˆ¶å¡«å¯«çš„è®Šæ•¸å„²å­˜åˆ° localStorage
```typescript
// å„²å­˜è®Šæ•¸
useEffect(() => {
  localStorage.setItem('prompt-variables', JSON.stringify(variables));
}, [variables]);

// è¼‰å…¥è®Šæ•¸
useEffect(() => {
  const saved = localStorage.getItem('prompt-variables');
  if (saved) {
    setVariables(JSON.parse(saved));
  }
}, []);
```

### 4.2 éŒ¯èª¤é‚Šç•Œ
**å»ºè­°**ï¼šåŠ å…¥ React Error Boundary è™•ç†éŒ¯èª¤
```typescript
// src/components/ErrorBoundary.tsx
```

### 4.3 æ¸¬è©¦è¦†è“‹
**å»ºè­°**ï¼š
- ç‚ºè®Šæ•¸æ›¿æ›é‚è¼¯åŠ å…¥å–®å…ƒæ¸¬è©¦
- ç‚ºçµ„ä»¶åŠ å…¥æ•´åˆæ¸¬è©¦
- æ¸¬è©¦é‚Šç•Œæƒ…æ³ï¼ˆç©ºè®Šæ•¸ã€ç‰¹æ®Šå­—å…ƒç­‰ï¼‰

### 4.4 ç„¡éšœç¤™æ€§ï¼ˆA11yï¼‰
**å»ºè­°**ï¼š
- ç¢ºèªæ‰€æœ‰æŒ‰éˆ•éƒ½æœ‰ aria-label
- ç¢ºèªéµç›¤å°èˆªæ­£å¸¸
- ç¢ºèªè¢å¹•é–±è®€å™¨æ”¯æ´

### 4.5 åœ‹éš›åŒ–æº–å‚™
**å»ºè­°**ï¼š
- è€ƒæ…®å°‡æ–‡å­—å…§å®¹æå–åˆ° i18n æª”æ¡ˆ
- ç‚ºæœªä¾†å¤šèªè¨€æ”¯æ´åšæº–å‚™

---

## å„ªå…ˆç´šå»ºè­°

### ğŸ”´ é«˜å„ªå…ˆç´šï¼ˆç«‹å³è™•ç†ï¼‰
1. æ¨¡çµ„è®Šæ•¸åˆå§‹åŒ–å•é¡Œï¼ˆ2.2ï¼‰
2. PromptCard è®Šæ•¸æ›¿æ›æ•ˆèƒ½ï¼ˆ2.1ï¼‰
3. è®Šæ•¸é©—è­‰æ©Ÿåˆ¶ï¼ˆ3.4ï¼‰

### ğŸŸ¡ ä¸­å„ªå…ˆç´šï¼ˆè¿‘æœŸè™•ç†ï¼‰
1. React.memo å„ªåŒ–ï¼ˆ2.3ï¼‰
2. è®Šæ•¸é è¨­å€¼ç®¡ç†ï¼ˆ3.5ï¼‰
3. æœ¬åœ°å„²å­˜åŠŸèƒ½ï¼ˆ4.1ï¼‰

### ğŸŸ¢ ä½å„ªå…ˆç´šï¼ˆé•·æœŸå„ªåŒ–ï¼‰
1. stepsData æª”æ¡ˆæ‹†åˆ†ï¼ˆ2.4ï¼‰
2. Helper Functions ä½¿ç”¨ï¼ˆ1.1ï¼‰
3. æ¸¬è©¦è¦†è“‹ï¼ˆ4.3ï¼‰
